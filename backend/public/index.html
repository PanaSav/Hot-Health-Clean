<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8"/>
  <title>Caregiver Card</title>
  <meta name="viewport" content="width=device-width, initial-scale=1"/>
  <link rel="stylesheet" href="/styles.css"/>
</head>
<body>
<div class="container">

  <header class="head">
    <h1>Caregiver Card</h1>
    <nav class="right">
      <a class="btn" href="/reports">Open Reports</a>
      <form method="POST" action="/logout" style="display:inline"><button class="btn" type="submit">Log out</button></form>
    </nav>
  </header>

  <section class="card">
    <h2>How To Use This App</h2>
    <p>Type into each field or press the mic button to speak the value. You can also record a free-speech
       <b>Journal</b> paragraph; we’ll parse it and fill the fields automatically. After you finish, click <b>Generate Report</b>.</p>
  </section>

  <section class="card">
    <h2>Language</h2>
    <div class="grid2">
      <div>
        <label>Detected working language</label>
        <input id="langDetected" type="text" readonly placeholder="(auto after Journal)" />
      </div>
      <div>
        <label>Translate to</label>
        <select id="lang">
          <option value="">(no translation)</option>
          <option value="en">English</option>
          <option value="es">Español</option>
          <option value="fr">Français</option>
          <option value="de">Deutsch</option>
          <option value="pt">Português</option>
          <option value="it">Italiano</option>
          <option value="he">עברית</option>
          <option value="sr">Srpski</option>
          <option value="pa">ਪੰਜਾਬੀ</option>
        </select>
      </div>
    </div>
    <div id="langConfirm" class="muted" style="margin-top:.5rem;"></div>
  </section>

  <section class="card">
    <h2>Patient & Contact’s Info</h2>
    <div class="grid2">
      <div class="field">
        <label>Patient Name</label>
        <div class="microwrap">
          <input id="pName" type="text" placeholder="Full name"/>
          <button class="mic-btn" data-target="pName" title="Speak">🎙️</button>
        </div>
      </div>
      <div class="field">
        <label>Email</label>
        <div class="microwrap">
          <input id="pEmail" type="email" placeholder="name@example.com"/>
          <button class="mic-btn" data-target="pEmail" title="Speak">🎙️</button>
        </div>
      </div>

      <div class="field">
        <label>Blood Type</label>
        <div class="microwrap">
          <input id="blood" type="text" placeholder="O+, A-, …"/>
          <button class="mic-btn" data-target="blood" title="Speak">🎙️</button>
        </div>
      </div>

      <div class="field">
        <label>Emergency Contact — Name</label>
        <div class="microwrap">
          <input id="eName" type="text" placeholder="Contact full name"/>
          <button class="mic-btn" data-target="eName" title="Speak">🎙️</button>
        </div>
      </div>
      <div class="field">
        <label>Emergency Contact — Phone</label>
        <div class="microwrap">
          <input id="ePhone" type="tel" placeholder="+1 555 123 1234" inputmode="tel"/>
          <button class="mic-btn" data-target="ePhone" title="Speak">🎙️</button>
        </div>
      </div>
      <div class="field">
        <label>Emergency Contact — Email</label>
        <div class="microwrap">
          <input id="eEmail" type="email" placeholder="ec@example.com"/>
          <button class="mic-btn" data-target="eEmail" title="Speak">🎙️</button>
        </div>
      </div>

      <div class="field wide"><label>Doctor</label></div>
      <div class="field">
        <div class="microwrap">
          <input id="dName" type="text" placeholder="Doctor name"/>
          <button class="mic-btn" data-target="dName" title="Speak">🎙️</button>
        </div>
      </div>
      <div class="field">
        <div class="microwrap">
          <input id="dAddress" type="text" placeholder="Doctor address"/>
          <button class="mic-btn" data-target="dAddress" title="Speak">🎙️</button>
        </div>
      </div>
      <div class="field">
        <div class="microwrap">
          <input id="dPhone" type="tel" placeholder="Doctor phone" inputmode="tel"/>
          <button class="mic-btn" data-target="dPhone" title="Speak">🎙️</button>
        </div>
      </div>
      <div class="field">
        <div class="microwrap">
          <input id="dFax" type="tel" placeholder="Doctor fax" inputmode="tel"/>
          <button class="mic-btn" data-target="dFax" title="Speak">🎙️</button>
        </div>
      </div>
      <div class="field">
        <div class="microwrap">
          <input id="dEmail" type="email" placeholder="doctor@example.com"/>
          <button class="mic-btn" data-target="dEmail" title="Speak">🎙️</button>
        </div>
      </div>

      <div class="field wide"><label>Pharmacy</label></div>
      <div class="field">
        <div class="microwrap">
          <input id="phName" type="text" placeholder="Pharmacy name"/>
          <button class="mic-btn" data-target="phName" title="Speak">🎙️</button>
        </div>
      </div>
      <div class="field">
        <div class="microwrap">
          <input id="phAddress" type="text" placeholder="Pharmacy address"/>
          <button class="mic-btn" data-target="phAddress" title="Speak">🎙️</button>
        </div>
      </div>
      <div class="field">
        <div class="microwrap">
          <input id="phPhone" type="tel" placeholder="Pharmacy phone" inputmode="tel"/>
          <button class="mic-btn" data-target="phPhone" title="Speak">🎙️</button>
        </div>
      </div>
      <div class="field">
        <div class="microwrap">
          <input id="phFax" type="tel" placeholder="Pharmacy fax" inputmode="tel"/>
          <button class="mic-btn" data-target="phFax" title="Speak">🎙️</button>
        </div>
      </div>
    </div>
  </section>

  <section class="card">
    <h2>Patient Health Status</h2>
    <div class="grid2">
      <div class="field">
        <label>Blood Pressure</label>
        <div class="microwrap">
          <input id="bp" type="text" placeholder="120/80"/>
          <button class="mic-btn" data-target="bp" title="Speak">🎙️</button>
        </div>
      </div>
      <div class="field">
        <label>Weight</label>
        <div class="microwrap">
          <input id="weight" type="text" placeholder="180 lbs or 82 kg"/>
          <button class="mic-btn" data-target="weight" title="Speak">🎙️</button>
        </div>
      </div>
      <div class="field">
        <label>Medications & Dose</label>
        <div class="microwrap">
          <input id="meds" type="text" placeholder="Amlodipine 10 mg; Metformin 500 mg"/>
          <button class="mic-btn" data-target="meds" title="Speak">🎙️</button>
        </div>
      </div>
      <div class="field">
        <label>Allergies</label>
        <div class="microwrap">
          <input id="allergies" type="text" placeholder="Penicillin; peanuts"/>
          <button class="mic-btn" data-target="allergies" title="Speak">🎙️</button>
        </div>
      </div>
      <div class="field">
        <label>Conditions</label>
        <div class="microwrap">
          <input id="conditions" type="text" placeholder="Hypertension; CKD"/>
          <button class="mic-btn" data-target="conditions" title="Speak">🎙️</button>
        </div>
      </div>
    </div>
  </section>

  <section class="card">
    <h2>Journal (parsed)</h2>
    <p class="muted">Speak freely. We’ll detect your language, parse details, and fill the fields. (Longer recordings OK.)</p>
    <div class="row">
      <button id="journalRec" class="btn">🎙️ Start Journal</button>
      <span id="jMeta" class="muted"></span>
    </div>
    <textarea id="journal" rows="4" placeholder="Journal text appears here after recording…"></textarea>
    <div id="langConfirm2" class="muted"></div>
  </section>

  <section class="card">
    <h2>Reporting</h2>
    <div class="row">
      <button id="btnGenerate" class="btn btn-primary">Generate Report</button>
      <span id="error" class="error"></span>
    </div>
    <div id="result" class="result"></div>
  </section>

</div>
<script src="/app.js"></script>
</body>
</html>
